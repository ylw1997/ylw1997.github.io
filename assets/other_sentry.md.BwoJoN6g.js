import{_ as s,c as i,o as a,a4 as l}from"./chunks/framework.FFX0tUBF.js";const E=JSON.parse('{"title":"Sentry","description":"","frontmatter":{},"headers":[],"relativePath":"other/sentry.md","filePath":"other/sentry.md","lastUpdated":1723441040000}'),n={name:"other/sentry.md"},t=l(`<h1 id="sentry" tabindex="-1">Sentry <a class="header-anchor" href="#sentry" aria-label="Permalink to &quot;Sentry&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">介绍</p><ul><li><p>Sentry 是一个开源的实时错误报告系统，可以帮助开发者快速定位错误，提高开发效率。</p></li><li><p>可以通过自己搭建 sentry 服务，也可以通过 sentry.io 提供的服务。</p></li><li><p>自己搭建的 sentry 服务，可以通过 docker-compose 快速搭建(不要直接用dockerhub镜像安装,版本太老)。</p></li><li><p>windows 下需要使用wsl2功能(<strong>因为要运行linux下的命令,windows不能直接运行</strong>)</p></li></ul></div><h2 id="前置工作" tabindex="-1">前置工作 <a class="header-anchor" href="#前置工作" aria-label="Permalink to &quot;前置工作&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">前置工作</p><ul><li><p>安装docker, docker-compose</p></li><li><p>安装wsl2</p></li><li><p>windows 商店安装一个linux发行版,如ubuntu</p></li><li><p>设置wsl2为默认的linux发行版</p></li></ul></div><h2 id="设置wsl2默认发行版" tabindex="-1">设置wsl2默认发行版 <a class="header-anchor" href="#设置wsl2默认发行版" aria-label="Permalink to &quot;设置wsl2默认发行版&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Ubuntu-22.04 是你的发行版名称</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wsl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --set-version</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Ubuntu-22.04</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span></code></pre></div><blockquote><p>查看docker 设置</p></blockquote><p><img src="https://article.biliimg.com/bfs/article/93e386b896592e4bcffbb401142bfb24181457be.png" alt="img"></p><h2 id="_1-拉取sentry镜像" tabindex="-1">1,拉取sentry镜像 <a class="header-anchor" href="#_1-拉取sentry镜像" aria-label="Permalink to &quot;1,拉取sentry镜像&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">拉取sentry镜像</p><ul><li>由于sentry官方镜像太老,所以需要自己拉取最新的镜像</li><li><a href="https://github.com/getsentry/self-hosted.git" target="_blank" rel="noreferrer">github地址</a></li></ul></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/getsentry/self-hosted.git</span></span></code></pre></div><h2 id="_2-wsl下安装" tabindex="-1">2,wsl下安装 <a class="header-anchor" href="#_2-wsl下安装" aria-label="Permalink to &quot;2,wsl下安装&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">wsl下安装</p><ul><li>wsl一般会把windows的文件系统映射到linux的<code>/mnt</code>目录下</li><li>进入到<code>self-hosted</code>目录下</li><li>执行<code>./install.sh</code>脚本</li></ul></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> self-hosted</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./install.sh</span></span></code></pre></div><h2 id="_3-创建用户名和密码" tabindex="-1">3,创建用户名和密码 <a class="header-anchor" href="#_3-创建用户名和密码" aria-label="Permalink to &quot;3,创建用户名和密码&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 现在是否需要创建你的账户？默认：是</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Would</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> you</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> like</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> account</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> now?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [Y/n]:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 输入邮箱</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Email:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 输入密码，注意密码输入是不可见的，所以注意大小写。输入完成后会再确认。</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Password:</span></span></code></pre></div><h2 id="_4-使用docker-compose启动" tabindex="-1">4,使用docker-compose启动 <a class="header-anchor" href="#_4-使用docker-compose启动" aria-label="Permalink to &quot;4,使用docker-compose启动&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker-compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span></span></code></pre></div><p><img src="https://article.biliimg.com/bfs/article/965df056b8080559e918f27e7e342ae4c5313a95.png" alt="img"></p><h2 id="_5-访问" tabindex="-1">5,访问 <a class="header-anchor" href="#_5-访问" aria-label="Permalink to &quot;5,访问&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">访问</p><ul><li>访问地址: <code>http://localhost:9000</code></li></ul></div><p><img src="https://article.biliimg.com/bfs/article/d64b9170d06757751d6437028049c1555bf8f7a7.png" alt="img"></p><h2 id="_6-配置中文" tabindex="-1">6,配置中文 <a class="header-anchor" href="#_6-配置中文" aria-label="Permalink to &quot;6,配置中文&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">配置中文</p><ul><li>进入用户设置 -&gt; 账户详情 -&gt; PREFERENCES -&gt; LANGUAGE</li></ul></div><p><img src="https://article.biliimg.com/bfs/article/4791f0973ce83f0b2baa6650e9db3193a70fdf0b.png" alt="img"></p><h2 id="_7-添加项目" tabindex="-1">7,添加项目 <a class="header-anchor" href="#_7-添加项目" aria-label="Permalink to &quot;7,添加项目&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">添加项目</p><ul><li>点击<code>创建项目</code>按钮,添加项目</li><li>选择vue项目</li></ul></div><p><img src="https://article.biliimg.com/bfs/article/4fb3e059919983a05cd0f51bfa2cdac8fcb0adb9.png" alt="img"></p><h2 id="_8-配置vue项目" tabindex="-1">8,配置vue项目 <a class="header-anchor" href="#_8-配置vue项目" aria-label="Permalink to &quot;8,配置vue项目&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @sentry/vue</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @sentry/tracing</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// main.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Sentry </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@sentry/vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Integrations } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@sentry/tracing&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Sentry.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Vue: Vue,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  dsn: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://XXXX@localhost:9000/2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  integrations: [</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Integrations.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BrowserTracing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      routingInstrumentation: Sentry.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vueRouterInstrumentation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(router),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      tracingOrigins: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;localhost&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://my-site-url.com/api&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      trackComponents: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  tracesSampleRate: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  build: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 开启sourcemap,否则无法定位到源码</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    sourcemap: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="_9-测试" tabindex="-1">9,测试 <a class="header-anchor" href="#_9-测试" aria-label="Permalink to &quot;9,测试&quot;">​</a></h2><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// app.tsx</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mounted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test Sentry&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ConfigProvider locale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{zhCN}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RouterView </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      &lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ConfigProvider</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h2 id="_10-查看错误" tabindex="-1">10,查看错误 <a class="header-anchor" href="#_10-查看错误" aria-label="Permalink to &quot;10,查看错误&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">查看错误</p><ul><li>点击 <code>问题</code> 按钮,查看错误</li></ul></div><p><img src="https://article.biliimg.com/bfs/article/73bf30dd590c3e064969d255e2119b10055e9aaf.png" alt="img"></p>`,37),e=[t];function h(p,k,r,d,c,o){return a(),i("div",null,e)}const y=s(n,[["render",h]]);export{E as __pageData,y as default};
