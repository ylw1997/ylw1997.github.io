import{_ as s,o as l,c as a,d as e}from"./app.d78673fc.js";const u=JSON.parse('{"title":"jenkins \u9AD8\u7EA7\u914D\u7F6E","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u81EA\u52A8\u5316\u9879\u76EE\u6784\u5EFA","slug":"\u81EA\u52A8\u5316\u9879\u76EE\u6784\u5EFA","link":"#\u81EA\u52A8\u5316\u9879\u76EE\u6784\u5EFA","children":[{"level":3,"title":"1,\u914D\u7F6E\u9879\u76EE","slug":"_1-\u914D\u7F6E\u9879\u76EE","link":"#_1-\u914D\u7F6E\u9879\u76EE","children":[]},{"level":3,"title":"2,\u914D\u7F6E GitLab","slug":"_2-\u914D\u7F6E-gitlab","link":"#_2-\u914D\u7F6E-gitlab","children":[]}]},{"level":2,"title":"\u90AE\u4EF6\u901A\u77E5","slug":"\u90AE\u4EF6\u901A\u77E5","link":"#\u90AE\u4EF6\u901A\u77E5","children":[{"level":3,"title":"1,\u90AE\u7BB1\u914D\u7F6E","slug":"_1-\u90AE\u7BB1\u914D\u7F6E","link":"#_1-\u90AE\u7BB1\u914D\u7F6E","children":[]},{"level":3,"title":"2,\u9879\u76EE\u914D\u7F6E","slug":"_2-\u9879\u76EE\u914D\u7F6E","link":"#_2-\u9879\u76EE\u914D\u7F6E","children":[]},{"level":3,"title":"3,\u67E5\u770B\u662F\u5426\u6210\u529F","slug":"_3-\u67E5\u770B\u662F\u5426\u6210\u529F","link":"#_3-\u67E5\u770B\u662F\u5426\u6210\u529F","children":[]}]},{"level":2,"title":"jenkins \u7248\u672C\u5347\u7EA7","slug":"jenkins-\u7248\u672C\u5347\u7EA7","link":"#jenkins-\u7248\u672C\u5347\u7EA7","children":[{"level":3,"title":"\u4E0B\u8F7Djenkins.war","slug":"\u4E0B\u8F7Djenkins-war","link":"#\u4E0B\u8F7Djenkins-war","children":[]},{"level":3,"title":"\u5347\u7EA7","slug":"\u5347\u7EA7","link":"#\u5347\u7EA7","children":[]},{"level":3,"title":"\u67E5\u770B\u662F\u5426\u6210\u529F","slug":"\u67E5\u770B\u662F\u5426\u6210\u529F","link":"#\u67E5\u770B\u662F\u5426\u6210\u529F","children":[]}]},{"level":2,"title":"\u591APOM\u7684MAVEN\u9879\u76EE\u6253\u5305","slug":"\u591Apom\u7684maven\u9879\u76EE\u6253\u5305","link":"#\u591Apom\u7684maven\u9879\u76EE\u6253\u5305","children":[]},{"level":2,"title":"\u6E05\u7406jenkins","slug":"\u6E05\u7406jenkins","link":"#\u6E05\u7406jenkins","children":[]}],"relativePath":"other/jenkins_advanced.md","lastUpdated":null}'),n={name:"other/jenkins_advanced.md"},t=e(`<h1 id="jenkins-\u9AD8\u7EA7\u914D\u7F6E" tabindex="-1">jenkins \u9AD8\u7EA7\u914D\u7F6E <a class="header-anchor" href="#jenkins-\u9AD8\u7EA7\u914D\u7F6E" aria-hidden="true">#</a></h1><h2 id="\u81EA\u52A8\u5316\u9879\u76EE\u6784\u5EFA" tabindex="-1">\u81EA\u52A8\u5316\u9879\u76EE\u6784\u5EFA <a class="header-anchor" href="#\u81EA\u52A8\u5316\u9879\u76EE\u6784\u5EFA" aria-hidden="true">#</a></h2><h3 id="_1-\u914D\u7F6E\u9879\u76EE" tabindex="-1">1,\u914D\u7F6E\u9879\u76EE <a class="header-anchor" href="#_1-\u914D\u7F6E\u9879\u76EE" aria-hidden="true">#</a></h3><div class="tip custom-block"><p class="custom-block-title">\u914D\u7F6E\u9879\u76EE</p><ul><li><p>1,\u70B9\u51FB\u9879\u76EE\u7684\u914D\u7F6E</p></li><li><p>2,\u70B9\u51FB\u6784\u5EFA\u89E6\u53D1\u5668,\u52FE\u9009<code>Build when a change is pushed to GitLab.GitLab webhook URL: http://XXX Enabled GitLab triggers</code></p></li><li><p>3,\u70B9\u51FB \u9AD8\u7EA7 \u6309\u94AE , \u627E\u5230 Secret token \u70B9\u51FB generate , \u751F\u6210\u4E00\u4E2A token , \u7136\u540E\u7136\u540E\u70B9\u51FB\u4FDD\u5B58</p></li></ul></div><p><img src="https://article.biliimg.com/bfs/article/289300a91a3ae7a4cc9c1426c58b5dd720399732.png" alt="i"></p><h3 id="_2-\u914D\u7F6E-gitlab" tabindex="-1">2,\u914D\u7F6E GitLab <a class="header-anchor" href="#_2-\u914D\u7F6E-gitlab" aria-hidden="true">#</a></h3><div class="tip custom-block"><p class="custom-block-title">gitlb\u914D\u7F6E</p><ul><li><p>1,\u8FDB\u5165 GitLab \u9879\u76EE\u7684\u8BBE\u7F6E\u9875\u9762</p></li><li><p>2,\u8FDB\u5165webhooks\u9875\u9762,\u70B9\u51FBadd webhook</p></li><li><p>3,\u586B\u5199URL,URL\u662FJenkins\u7684webhook\u5730\u5740,\u683C\u5F0F\u4E3A<code>http://XXX/project/\u9879\u76EE\u540D</code>,Secret Token\u662FJenkins\u751F\u6210\u7684token</p></li><li><p>4,\u53BB\u6389SSL\u9A8C\u8BC1</p></li><li><p>5,\u70B9\u51FB\u4FDD\u5B58</p></li><li><p>6,\u70B9\u51FB\u6D4B\u8BD5\u4E0B\u62C9\u6846,\u70B9\u51FBPush events,\u8FDB\u5165jenkins\u4E3B\u9875,\u67E5\u770B\u6784\u5EFA\u6267\u884C\u72B6\u6001,\u5982\u679C\u6709\u5BF9\u5E94\u7684\u9879\u76EE\u6B63\u5728\u6784\u5EFA,\u4EE3\u8868\u521B\u5EFA\u81EA\u52A8\u5316\u6210\u529F</p></li></ul></div><p><img src="https://article.biliimg.com/bfs/article/8aacaff0700e110c89e176cbe15562f59ed115a6.png" alt="img"></p><h2 id="\u90AE\u4EF6\u901A\u77E5" tabindex="-1">\u90AE\u4EF6\u901A\u77E5 <a class="header-anchor" href="#\u90AE\u4EF6\u901A\u77E5" aria-hidden="true">#</a></h2><h3 id="_1-\u90AE\u7BB1\u914D\u7F6E" tabindex="-1">1,\u90AE\u7BB1\u914D\u7F6E <a class="header-anchor" href="#_1-\u90AE\u7BB1\u914D\u7F6E" aria-hidden="true">#</a></h3><div class="tip custom-block"><p class="custom-block-title">\u90AE\u7BB1\u914D\u7F6E</p><ul><li><p>1,\u8FDB\u5165\u7CFB\u7EDF\u7BA1\u7406,\u70B9\u51FB\u7CFB\u7EDF\u914D\u7F6E,\u627E\u5230Extended E-mail Notification</p></li><li><p>2,\u5728SMTP Serve \u8F93\u5165\u4F60\u7684\u90AE\u7BB1\u7684\u670D\u52A1\u5668\u5730\u5740(\u6587\u4E2D\u7528\u7684163\u90AE\u7BB1,\u53EF\u4EE5\u5728163\u90AE\u7BB1\u7684\u8BBE\u7F6E\u9875\u9762\u627E\u5230,\u5176\u4ED6\u90AE\u7BB1\u4E5F\u662F\u540C\u7406)</p></li><li><p>3,\u5728SMTP Port\u8F93\u5165\u6846\u4E2D\u586B\u5199465\u7AEF\u53E3(\u8FD9\u662FSMTP\u534F\u8BAE\u901A\u7528\u7684\u7AEF\u53E3,\u5982\u679C\u4E0D\u540C\u5C31\u586B\u5199\u81EA\u5DF1\u90AE\u7BB1\u7684)</p></li><li><p>4,\u70B9\u51FB\u9AD8\u7EA7,\u9009\u62E9\u51ED\u8BC1(\u5982\u679C\u6CA1\u6709\u51ED\u8BC1\u53EF\u4EE5\u6DFB\u52A0\u4E00\u4E2A\u51ED\u8BC1,\u8F93\u5165\u81EA\u5DF1\u7684\u7528\u6237\u540D\u548C\u5BC6\u7801)</p></li><li><p>5,\u52FE\u9009Use ssl</p></li><li><p>6,Default Content Type \u9009\u62E9text/html</p></li><li><p>7,\u5728Default Recipients \u8F93\u5165\u8981\u53D1\u9001\u7684\u90AE\u7BB1,\u9017\u53F7\u5206\u9694(\u5728\u9879\u76EE\u4E2D\u53D1\u9001\u90AE\u4EF6\u53EF\u4EE5\u7528$DEFAULT_RECIPIENTS\u6765\u4F7F\u7528\u8FD9\u91CC\u7684\u90AE\u7BB1,\u4E5F\u53EF\u4EE5\u76F4\u63A5\u8986\u76D6)</p></li></ul></div><p><img src="https://article.biliimg.com/bfs/article/87fb0629eb0ffe2a8f9fc81fd7b8e23907a9daee.png" alt="i"></p><p><img src="https://article.biliimg.com/bfs/article/47b58e57b4d70bb52a585bad318883107bf36d1f.png" alt="i"></p><h3 id="_2-\u9879\u76EE\u914D\u7F6E" tabindex="-1">2,\u9879\u76EE\u914D\u7F6E <a class="header-anchor" href="#_2-\u9879\u76EE\u914D\u7F6E" aria-hidden="true">#</a></h3><div class="tip custom-block"><p class="custom-block-title">\u9879\u76EE\u914D\u7F6E</p><ul><li><p>1,\u6253\u5F00\u4EFB\u52A1\u7684\u914D\u7F6E\u9875\u9762,\u5728\u6700\u4E0B\u9762\u627E\u5230\u589E\u52A0\u6784\u5EFA\u540E\u64CD\u4F5C\u6B65\u9AA4,\u9009\u62E9Editable Email Notification</p></li><li><p>2,\u5728Editable Email Notification \u914D\u7F6E\u9879\u4E2D,\u627E\u5230\u5E76\u70B9\u51FB Advanced Settings \u6309\u94AE</p></li><li><p>3,\u5728Content Type\u4E2D\u9009\u62E9HTML\u7C7B\u578B</p></li><li><p>4,\u5728Content\u4E2D\u8F93\u5165\u4EE5\u4E0B\u5185\u5BB9(\u4E5F\u53EF\u4EE5\u4E0D\u6539,\u4E0D\u6539\u5185\u5BB9\u8F83\u5C11)</p></li><li><p>5,\u70B9\u51FBAttach Build Log \u9009\u62E9 Attach Build Log \u53EF\u4EE5\u643A\u5E26\u6784\u5EFA\u65E5\u5FD7</p></li></ul></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">hr/</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">\u672C\u90AE\u4EF6\u662F\u7A0B\u5E8F\u81EA\u52A8\u4E0B\u53D1\u7684\uFF0C\u8BF7\u52FF\u56DE\u590D\uFF01</span><span style="color:#89DDFF;">)&lt;</span><span style="color:#A6ACCD;">br/&gt;&lt;hr/</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">\u9879\u76EE\u540D\u79F0\uFF1A</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">PROJECT_NAME</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">br/&gt;&lt;hr/</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">\u6784\u5EFA\u7F16\u53F7\uFF1Atest_</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">BUILD_NUMBER</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">br/&gt;&lt;hr/</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">\u6784\u5EFA\u72B6\u6001\uFF1A</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">BUILD_STATUS</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">br/&gt;&lt;hr/</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">\u89E6\u53D1\u539F\u56E0\uFF1A</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">CAUSE</span><span style="color:#89DDFF;">}&lt;</span><span style="color:#A6ACCD;">br/&gt;&lt;hr/</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">\u6784\u5EFA\u65E5\u5FD7\u5730\u5740\uFF1A</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">a href=</span><span style="color:#89DDFF;">&quot;\${</span><span style="color:#A6ACCD;">BUILD_URL</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">console</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;\${</span><span style="color:#A6ACCD;">BUILD_URL</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">/a&gt;&lt;br/&gt;&lt;hr/</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">\u6784\u5EFA\u5730\u5740\uFF1A</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">a href=</span><span style="color:#89DDFF;">&quot;$</span><span style="color:#A6ACCD;">BUILD_URL</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;$</span><span style="color:#A6ACCD;">BUILD_URL</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">/a&gt;&lt;br/&gt;&lt;hr/</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">\u53D8\u66F4\u96C6:</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">JELLY_SCRIPT,template=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">}&lt;</span><span style="color:#A6ACCD;">br/&gt;&lt;hr/</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h3 id="_3-\u67E5\u770B\u662F\u5426\u6210\u529F" tabindex="-1">3,\u67E5\u770B\u662F\u5426\u6210\u529F <a class="header-anchor" href="#_3-\u67E5\u770B\u662F\u5426\u6210\u529F" aria-hidden="true">#</a></h3><div class="tip custom-block"><p class="custom-block-title">TIP</p><ul><li><p>1,\u70B9\u51FB\u7ACB\u5373\u6784\u5EFA</p></li><li><p>2,\u767B\u5F55\u90AE\u7BB1</p></li></ul></div><p><img src="https://article.biliimg.com/bfs/article/00bab6a852b689f9b80eba7b58419f41bf86518b.png" alt="i"></p><h2 id="jenkins-\u7248\u672C\u5347\u7EA7" tabindex="-1">jenkins \u7248\u672C\u5347\u7EA7 <a class="header-anchor" href="#jenkins-\u7248\u672C\u5347\u7EA7" aria-hidden="true">#</a></h2><h3 id="\u4E0B\u8F7Djenkins-war" tabindex="-1">\u4E0B\u8F7Djenkins.war <a class="header-anchor" href="#\u4E0B\u8F7Djenkins-war" aria-hidden="true">#</a></h3><div class="tip custom-block"><p class="custom-block-title">\u4E0B\u8F7D</p><ul><li>\u8FDB\u5165jenkins ,\u70B9\u51FB\u7CFB\u7EDF\u7BA1\u7406 ,\u5982\u679C\u6709\u5347\u7EA7\u7248\u672C,\u4F1A\u81EA\u52A8\u63D0\u793A,\u70B9\u51FB\u4E0B\u8F7D\u5373\u53EF</li><li>\u4E5F\u53EF\u4EE5 \u76F4\u63A5\u70B9 <a href="http://mirrors.jenkins.io/war/latest/jenkins.war" target="_blank" rel="noreferrer">\u8FD9\u91CC</a> \u4E0B\u8F7D</li></ul></div><h3 id="\u5347\u7EA7" tabindex="-1">\u5347\u7EA7 <a class="header-anchor" href="#\u5347\u7EA7" aria-hidden="true">#</a></h3><blockquote><p>\u4F7F\u7528root\u7528\u6237\u8BBF\u95EEdocker\u5BB9\u5668</p></blockquote><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">docker </span><span style="color:#82AAFF;">exec</span><span style="color:#A6ACCD;"> -it -u root myjenkins bin/bash</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><blockquote><p>\u8FDB\u5165 /usr/share/jenkins/\u76EE\u5F55\uFF0C\u5907\u4EFDjenkins.war\u6587\u4EF6</p></blockquote><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;">  /usr/share/jenkins</span></span>
<span class="line"><span style="color:#A6ACCD;">mv jenkins.war jenkins.war.bak</span></span>
<span class="line"></span></code></pre></div><blockquote><p>\u9000\u51FA\u91CD\u542Fjenkins</p></blockquote><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#82AAFF;">exit</span></span>
<span class="line"><span style="color:#A6ACCD;">docker restart myjenkins</span></span>
<span class="line"></span></code></pre></div><h3 id="\u67E5\u770B\u662F\u5426\u6210\u529F" tabindex="-1">\u67E5\u770B\u662F\u5426\u6210\u529F <a class="header-anchor" href="#\u67E5\u770B\u662F\u5426\u6210\u529F" aria-hidden="true">#</a></h3><blockquote><p>\u8FDB\u5165jenkins\u4E3B\u9875,\u67E5\u770B\u9875\u9762\u5E95\u90E8</p></blockquote><p><img src="https://article.biliimg.com/bfs/article/993efc73e791142ab40f1877cc16dd2f6166f17b.png" alt="i"></p><h2 id="\u591Apom\u7684maven\u9879\u76EE\u6253\u5305" tabindex="-1">\u591APOM\u7684MAVEN\u9879\u76EE\u6253\u5305 <a class="header-anchor" href="#\u591Apom\u7684maven\u9879\u76EE\u6253\u5305" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">\u591APOM\u7684MAVEN\u9879\u76EE</p><ul><li><p>\u5728\u90E8\u7F72spring cloud\u9879\u76EE\u7684\u65F6\u5019,\u5F80\u5F80\u4F1A\u5B58\u5728\u591A\u4E2Apom\u6587\u4EF6,jenkins\u53EF\u4EE5\u591A\u6B21\u6253\u5305,\u7136\u540E\u90E8\u7F72</p></li><li><p>1,\u70B9\u51FB\u8FDB\u5165\u9879\u76EE\u7684\u914D\u7F6E,\u627E\u5230Pre Steps,\u9009\u62E9 \u8C03\u7528\u9876\u5C42maven\u76EE\u6807 \u9009\u9879</p></li><li><p>2,\u5728\u8C03\u7528\u9876\u5C42 Maven \u76EE\u6807\u7684Maven\u7248\u672C\u4E2D\u9009\u62E9\u81EA\u5DF1\u7248\u672C</p></li><li><p>3,\u5728\u76EE\u6807\u6846\u4E2D\u8F93\u5165 clean install</p></li><li><p>4,\u5728pom\u6846\u4E2D\u8F93\u5165 \u8981\u8FD0\u884C\u7684pom\u5730\u5740 \u4F8B\u5982:mall-parent/mall-H5service/pom.xml</p></li></ul></div><p><img src="https://article.biliimg.com/bfs/article/40d76408b0eeab975d5dd6371c3f5e7316eb3261.png" alt="i"><img src="https://article.biliimg.com/bfs/article/c4e36e3da58bd6bf662c4a08107ab5210882f888.png" alt="i"></p><div class="warning custom-block"><p class="custom-block-title">\u6CE8\u610F</p><ul><li>\u53EF\u4EE5\u914D\u7F6E\u591A\u4E2APre Steps</li><li>\u6700\u540E\u4E00\u4E2Apom\u9879\u76EE,\u5FC5\u987B\u5728\u9879\u76EE\u7684 Build \u9879\u4E2D\u914D\u7F6E</li></ul></div><p><img src="https://article.biliimg.com/bfs/article/0781cf07f761ccedcccc53ef113380fa98f5f38e.png" alt="i"></p><h2 id="\u6E05\u7406jenkins" tabindex="-1">\u6E05\u7406jenkins <a class="header-anchor" href="#\u6E05\u7406jenkins" aria-hidden="true">#</a></h2><blockquote><p>1,\u53EF\u4EE5\u5728\u8BBE\u7F6E\u4E2D\u8BBE\u7F6E\u4E22\u5F03\u65E7\u7684\u6784\u5EFA</p></blockquote><p><img src="https://article.biliimg.com/bfs/article/4987771061496b0129cca15df17498387e44116b.png" alt="i"></p><blockquote><p>2,\u53EF\u4EE5\u5220\u9664\u5DE5\u4F5C\u533A\u6587\u4EF6</p></blockquote><p><img src="https://article.biliimg.com/bfs/article/0c684c5e77a9b6be3b8ec6948fe9a0f97a1353b1.png" alt="i"></p><blockquote><p>3,\u4F18\u5316\u9879\u76EE\u914D\u7F6E,\u4F8B\u5982:\u6253\u5305spring cloud \u53EF\u4EE5\u4E0D\u5168\u5C40\u6253\u5305,\u53EA\u6253\u5305\u5176\u4E2D\u51E0\u4E2Apom</p></blockquote>`,43),i=[t];function p(c,o,r,d,h,b){return l(),a("div",null,i)}const k=s(n,[["render",p]]);export{u as __pageData,k as default};
