import{_ as s,o as a,c as n,d as l}from"./app.33845605.js";const F=JSON.parse('{"title":"docker","description":"","frontmatter":{},"headers":[{"level":2,"title":"安装docker","slug":"安装docker","link":"#安装docker","children":[]},{"level":2,"title":"安装docker-compose","slug":"安装docker-compose","link":"#安装docker-compose","children":[]},{"level":2,"title":"搜索镜像","slug":"搜索镜像","link":"#搜索镜像","children":[]},{"level":2,"title":"拉取镜像","slug":"拉取镜像","link":"#拉取镜像","children":[]},{"level":2,"title":"删除镜像","slug":"删除镜像","link":"#删除镜像","children":[]},{"level":2,"title":"运行镜像","slug":"运行镜像","link":"#运行镜像","children":[]},{"level":2,"title":"查看容器","slug":"查看容器","link":"#查看容器","children":[]},{"level":2,"title":"给容器起名字","slug":"给容器起名字","link":"#给容器起名字","children":[]},{"level":2,"title":"停止容器","slug":"停止容器","link":"#停止容器","children":[]},{"level":2,"title":"启动容器","slug":"启动容器","link":"#启动容器","children":[]},{"level":2,"title":"重启","slug":"重启","link":"#重启","children":[]},{"level":2,"title":"更新容器自动重启","slug":"更新容器自动重启","link":"#更新容器自动重启","children":[]},{"level":2,"title":"查看容器日志","slug":"查看容器日志","link":"#查看容器日志","children":[]},{"level":2,"title":"进入容器","slug":"进入容器","link":"#进入容器","children":[]},{"level":2,"title":"拷贝文件到容器","slug":"拷贝文件到容器","link":"#拷贝文件到容器","children":[]},{"level":2,"title":"创建 dockerfile 文件","slug":"创建-dockerfile-文件","link":"#创建-dockerfile-文件","children":[]},{"level":2,"title":"docker 命令摘要","slug":"docker-命令摘要","link":"#docker-命令摘要","children":[]},{"level":2,"title":"dockerfile 创建镜像","slug":"dockerfile-创建镜像","link":"#dockerfile-创建镜像","children":[]},{"level":2,"title":"docker compose","slug":"docker-compose","link":"#docker-compose","children":[]},{"level":2,"title":"docker-compose.yml","slug":"docker-compose-yml","link":"#docker-compose-yml","children":[]},{"level":2,"title":"启动","slug":"启动","link":"#启动","children":[]},{"level":2,"title":"全部停止","slug":"全部停止","link":"#全部停止","children":[]},{"level":2,"title":"全部删除容器","slug":"全部删除容器","link":"#全部删除容器","children":[]},{"level":2,"title":"全部删除镜像","slug":"全部删除镜像","link":"#全部删除镜像","children":[]},{"level":2,"title":"查看运行状态","slug":"查看运行状态","link":"#查看运行状态","children":[]},{"level":2,"title":"限制内存大小","slug":"限制内存大小","link":"#限制内存大小","children":[]},{"level":2,"title":"mysql compose文件实例","slug":"mysql-compose文件实例","link":"#mysql-compose文件实例","children":[]},{"level":2,"title":"nacos compose文件实例","slug":"nacos-compose文件实例","link":"#nacos-compose文件实例","children":[]},{"level":2,"title":"jenkins compose文件实例","slug":"jenkins-compose文件实例","link":"#jenkins-compose文件实例","children":[]}],"relativePath":"other/docker.md","lastUpdated":1663902827000}'),p={name:"other/docker.md"},o=l(`<h1 id="docker" tabindex="-1">docker <a class="header-anchor" href="#docker" aria-hidden="true">#</a></h1><h2 id="安装docker" tabindex="-1">安装docker <a class="header-anchor" href="#安装docker" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">安装</p><ul><li><p>两种安装方法</p></li><li><p>1, yum安装</p></li><li><p><a href="https://developer.aliyun.com/mirror/centos?spm=a2c6h.13651102.0.0.27311b11e58Kkv" target="_blank" rel="noreferrer">切换源</a></p></li><li><p>安装 <code>yum install docker</code></p></li><li><p>2,脚本一键安装</p></li><li><p><a href="https://get.daocloud.io/#install-compose" target="_blank" rel="noreferrer">DaoCloud</a></p></li></ul></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># yum安装</span></span>
<span class="line"><span style="color:#FFCB6B;">mv</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/yum.repos.d/CentOS-Base.repo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/yum.repos.d/CentOS-Base.repo.backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/yum.repos.d/CentOS-Base.repo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://mirrors.aliyun.com/repo/Centos-vault-8.5.2111.repo</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yum-utils</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">device-mapper-persistent-data</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">lvm2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-ce</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># DaoCloud</span></span>
<span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-sSL</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://get.daocloud.io/docker</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">sh</span></span>
<span class="line"></span></code></pre></div><h2 id="安装docker-compose" tabindex="-1">安装docker-compose <a class="header-anchor" href="#安装docker-compose" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><ul><li><p>脚本安装</p></li><li><p><a href="https://get.daocloud.io/#install-compose" target="_blank" rel="noreferrer">DaoCloud</a></p></li></ul></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># DaoCloud</span></span>
<span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-L</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://get.daocloud.io/docker/compose/releases/download/v2.</span><span style="color:#F78C6C;">15.0</span><span style="color:#C3E88D;">/docker-compose-</span><span style="color:#89DDFF;">\`</span><span style="color:#FFCB6B;">uname</span><span style="color:#C3E88D;"> -s</span><span style="color:#89DDFF;">\`</span><span style="color:#FFCB6B;">-</span><span style="color:#89DDFF;">\`</span><span style="color:#FFCB6B;">uname</span><span style="color:#C3E88D;"> -m</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/usr/local/bin/docker-compose</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">+x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/local/bin/docker-compose</span></span>
<span class="line"></span></code></pre></div><h2 id="搜索镜像" tabindex="-1">搜索镜像 <a class="header-anchor" href="#搜索镜像" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">search</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span></span>
<span class="line"></span></code></pre></div><h2 id="拉取镜像" tabindex="-1">拉取镜像 <a class="header-anchor" href="#拉取镜像" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pull</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx:1.12.1</span></span>
<span class="line"></span></code></pre></div><h2 id="删除镜像" tabindex="-1">删除镜像 <a class="header-anchor" href="#删除镜像" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rmi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx:1.12.1</span></span>
<span class="line"></span></code></pre></div><h2 id="运行镜像" tabindex="-1">运行镜像 <a class="header-anchor" href="#运行镜像" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># -d 后台运行 -p 端口映射</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">80</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">80</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx:1.12.1</span></span>
<span class="line"></span></code></pre></div><h2 id="查看容器" tabindex="-1">查看容器 <a class="header-anchor" href="#查看容器" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ps</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">CONTAINER</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ID</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">IMAGE</span><span style="color:#A6ACCD;">          </span><span style="color:#C3E88D;">COMMAND</span><span style="color:#A6ACCD;">                  </span><span style="color:#C3E88D;">CREATED</span><span style="color:#A6ACCD;">              </span><span style="color:#C3E88D;">STATUS</span><span style="color:#A6ACCD;">                        </span><span style="color:#C3E88D;">PORTS</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#FFCB6B;">NAMES</span></span>
<span class="line"><span style="color:#A6ACCD;">2267a160b66d   nginx:1.12.1</span><span style="color:#89DDFF;">   &quot;</span><span style="color:#C3E88D;">nginx -g &#39;daemon of…</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">   About a minute ago   Up About a minute             0.0.0.0:</span><span style="color:#F78C6C;">80</span><span style="color:#A6ACCD;">-</span><span style="color:#89DDFF;">&gt;</span><span style="color:#F78C6C;">80</span><span style="color:#A6ACCD;">/tcp   relaxed_snyder</span></span>
<span class="line"><span style="color:#A6ACCD;">5ef980bacfb0   mysql:8.0.28</span><span style="color:#89DDFF;">   &quot;</span><span style="color:#C3E88D;">docker-entrypoint.s…</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">8</span><span style="color:#A6ACCD;"> days ago           Exited </span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">137</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">12</span><span style="color:#A6ACCD;"> minutes ago</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h2 id="给容器起名字" tabindex="-1">给容器起名字 <a class="header-anchor" href="#给容器起名字" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rename</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">2267a160b66d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">CONTAINER</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ID</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">IMAGE</span><span style="color:#A6ACCD;">          </span><span style="color:#C3E88D;">COMMAND</span><span style="color:#A6ACCD;">                  </span><span style="color:#C3E88D;">CREATED</span><span style="color:#A6ACCD;">         </span><span style="color:#C3E88D;">STATUS</span><span style="color:#A6ACCD;">                        </span><span style="color:#C3E88D;">PORTS</span><span style="color:#A6ACCD;">                </span><span style="color:#C3E88D;">NAMES</span></span>
<span class="line"><span style="color:#A6ACCD;">2267a160b66d   nginx:1.12.1</span><span style="color:#89DDFF;">   &quot;</span><span style="color:#C3E88D;">nginx -g &#39;daemon of…</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">7</span><span style="color:#A6ACCD;"> minutes ago   Up </span><span style="color:#F78C6C;">7</span><span style="color:#A6ACCD;"> minutes                  0.0.0.0:</span><span style="color:#F78C6C;">80</span><span style="color:#A6ACCD;">-</span><span style="color:#89DDFF;">&gt;</span><span style="color:#F78C6C;">80</span><span style="color:#A6ACCD;">/tcp   mynginx</span></span>
<span class="line"><span style="color:#A6ACCD;">5ef980bacfb0   mysql:8.0.28</span><span style="color:#89DDFF;">   &quot;</span><span style="color:#C3E88D;">docker-entrypoint.s…</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">8</span><span style="color:#A6ACCD;"> days ago      Exited </span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">137</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">18</span><span style="color:#A6ACCD;"> minutes ago                        docker_mysql</span></span>
<span class="line"></span></code></pre></div><h2 id="停止容器" tabindex="-1">停止容器 <a class="header-anchor" href="#停止容器" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 或者</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">2267a160b66d</span></span>
<span class="line"></span></code></pre></div><h2 id="启动容器" tabindex="-1">启动容器 <a class="header-anchor" href="#启动容器" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx</span></span>
<span class="line"></span></code></pre></div><h2 id="重启" tabindex="-1">重启 <a class="header-anchor" href="#重启" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">restart</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx</span></span>
<span class="line"></span></code></pre></div><h2 id="更新容器自动重启" tabindex="-1">更新容器自动重启 <a class="header-anchor" href="#更新容器自动重启" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">update</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--restart=always</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx</span></span>
<span class="line"></span></code></pre></div><h2 id="查看容器日志" tabindex="-1">查看容器日志 <a class="header-anchor" href="#查看容器日志" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">logs</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx</span></span>
<span class="line"></span></code></pre></div><h2 id="进入容器" tabindex="-1">进入容器 <a class="header-anchor" href="#进入容器" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/bin/bash</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 退出</span></span>
<span class="line"><span style="color:#82AAFF;">exit</span></span>
<span class="line"></span></code></pre></div><h2 id="拷贝文件到容器" tabindex="-1">拷贝文件到容器 <a class="header-anchor" href="#拷贝文件到容器" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/Users/xxx/xxx.txt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx:/usr/share/nginx/html</span></span>
<span class="line"></span></code></pre></div><h2 id="创建-dockerfile-文件" tabindex="-1">创建 dockerfile 文件 <a class="header-anchor" href="#创建-dockerfile-文件" aria-hidden="true">#</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Dockerfile</span></span>
<span class="line"><span style="color:#FFCB6B;">FROM</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">LABEL</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MAINTAINER=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">yangliwei</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">RUN</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">g+rwx</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/var/cache/nginx</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/var/run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/var/log/nginx</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/share/nginx/html/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">ENV</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">TZ=Asia/Shanghai</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">COPY</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dist/</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">/usr/share/nginx/html/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">EXPOSE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">80</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">CMD</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">nginx</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">-g</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">daemon off;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><h2 id="docker-命令摘要" tabindex="-1">docker 命令摘要 <a class="header-anchor" href="#docker-命令摘要" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">命令摘要</p><ul><li>FROM- 镜像从那里来</li><li>MAINTAINER- 镜像维护者信息</li><li>RUN- 构建镜像执行的命令，每一次 RUN 都会构建一层</li><li>CMD- 容器启动的命令，如果有多个则以最后一个为准，也可以为 ENTRYPOINT 提供参数</li><li>VOLUME- 定义数据卷，如果没有定义则使用默认</li><li>USER- 指定后续执行的用户组和用户</li><li>WORKDIR- 切换当前执行的工作目录</li><li>HEALTHCHECH- 健康检测指令</li><li>ARG- 变量属性值，但不在容器内部起作用</li><li>EXPOSE- 暴露端口</li><li>ENV- 变量属性值，容器内部也会起作用</li><li>ADD- 添加文件，如果是压缩文件也解压</li><li>COPY- 添加文件，以复制的形式</li><li>ENTRYPOINT- 容器进入时执行的命令</li></ul></div><h2 id="dockerfile-创建镜像" tabindex="-1">dockerfile 创建镜像 <a class="header-anchor" href="#dockerfile-创建镜像" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 创建镜像</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-t</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mynginx</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 查看镜像</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">images</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 结果</span></span>
<span class="line"><span style="color:#FFCB6B;">REPOSITORY</span><span style="color:#A6ACCD;">           </span><span style="color:#C3E88D;">TAG</span><span style="color:#A6ACCD;">             </span><span style="color:#C3E88D;">IMAGE</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ID</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">CREATED</span><span style="color:#A6ACCD;">          </span><span style="color:#C3E88D;">SIZE</span></span>
<span class="line"><span style="color:#FFCB6B;">mynginx</span><span style="color:#A6ACCD;">              </span><span style="color:#C3E88D;">latest</span><span style="color:#A6ACCD;">          </span><span style="color:#C3E88D;">c8c87fb396ce</span><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">43</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">seconds</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ago</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">146MB</span></span>
<span class="line"></span></code></pre></div><h2 id="docker-compose" tabindex="-1">docker compose <a class="header-anchor" href="#docker-compose" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">简介</p><p>Compose 是用于定义和运行多容器 Docker 应用程序的工具。通过 Compose，您可以使用 YML 文件来配置应用程序需要的所有服务。然后，使用一个命令，就可以从 YML 文件配置中创建并启动所有服务。 大致步骤:</p><ul><li>使用 Dockerfile 定义应用程序的环境</li><li>使用 docker-compose.yml 定义构成应用程序的服务，这样它们可以在隔离环境中一起运行。</li><li>使用 docker-compose up 命令来启动应用程序。</li></ul></div><h2 id="docker-compose-yml" tabindex="-1">docker-compose.yml <a class="header-anchor" href="#docker-compose-yml" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 用上面那个 Dockerfile 创建的镜像</span></span>
<span class="line"><span style="color:#FFCB6B;">version:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">services:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">web:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">build:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">ports:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">80:80</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><h2 id="启动" tabindex="-1">启动 <a class="header-anchor" href="#启动" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">up</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 如果是自定义名称启动</span></span>
<span class="line"><span style="color:#FFCB6B;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-f</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.</span><span style="color:#A6ACCD;">\\p</span><span style="color:#C3E88D;">hp.yml</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">up</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span></span>
<span class="line"></span></code></pre></div><h2 id="全部停止" tabindex="-1">全部停止 <a class="header-anchor" href="#全部停止" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> ps -a -q</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><h2 id="全部删除容器" tabindex="-1">全部删除容器 <a class="header-anchor" href="#全部删除容器" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> ps -aq</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><h2 id="全部删除镜像" tabindex="-1">全部删除镜像 <a class="header-anchor" href="#全部删除镜像" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rmi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-f</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> images -qa</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><h2 id="查看运行状态" tabindex="-1">查看运行状态 <a class="header-anchor" href="#查看运行状态" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ps</span></span>
<span class="line"></span></code></pre></div><h2 id="限制内存大小" tabindex="-1">限制内存大小 <a class="header-anchor" href="#限制内存大小" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># docker限制内存大小</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">update</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">jenkins</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-m</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">3g</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">--memory-swap</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 命令详解</span></span>
<span class="line"><span style="color:#FFCB6B;">--memory</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">或</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-m</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">限制容器的内存使用量</span></span>
<span class="line"><span style="color:#FFCB6B;">--memory-swap</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">限制内存和</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Swap</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">的总和，不设置的话默认为--memory的两倍</span></span>
<span class="line"></span></code></pre></div><h2 id="mysql-compose文件实例" tabindex="-1">mysql compose文件实例 <a class="header-anchor" href="#mysql-compose文件实例" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">version:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">services:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">docker_mysql:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">user:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">restart:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">always</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">image:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql:8.0.28</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">container_name:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker_mysql</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">ports:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3306:3306</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">command</span><span style="color:#FFCB6B;">:</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">--default-authentication-plugin=mysql_native_password</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">--character-</span><span style="color:#82AAFF;">set</span><span style="color:#FFCB6B;">-server=utf8mb4</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">--collation-server=utf8mb4_general_ci</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">--explicit_defaults_for_timestamp=</span><span style="color:#82AAFF;">true</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">--lower_case_table_names=1</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">environment:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">LANG:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">en_US.UTF-</span><span style="color:#F78C6C;">8</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">TZ:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Asia/Shanghai</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">MYSQL_ROOT_PASSWORD:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123456</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">volumes:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">D:/docker/mysql/data:/var/lib/mysql</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">D:/docker/mysql/conf:/etc/mysql/conf.d</span></span>
<span class="line"></span></code></pre></div><h2 id="nacos-compose文件实例" tabindex="-1">nacos compose文件实例 <a class="header-anchor" href="#nacos-compose文件实例" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">version:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">services:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">nacos:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">image:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nacos/nacos-server</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">hostname:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nacos-server01</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">container_name:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nacos-standalone-mysql</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">restart:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">always</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">environment:</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MODE=standalone</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">PREFER_HOST_MODE=hostname</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">SPRING_DATASOURCE_PLATFORM=mysql</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MYSQL_SERVICE_HOST=172.19.0.3</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MYSQL_SERVICE_PORT=</span><span style="color:#F78C6C;">3306</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MYSQL_SERVICE_USER=root</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MYSQL_SERVICE_PASSWORD=</span><span style="color:#F78C6C;">123456</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MYSQL_SERVICE_DB_NAME=nacos</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">JVM_XMS=512m</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">JVM_XMX=512m</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">JVM_XMN=512m</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">volumes:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">D:/docker/nacos/logs:/home/nacos/logs</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">ports:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8848</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">8848</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">9848</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">9848</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">9555</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">9555</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">depends_on:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker_mysql</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">restart:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">always</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">networks:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">app_net:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">ipv4_address:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">172.19.0.2</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">docker_mysql:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">user:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">restart:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">always</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">image:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql:8.0.28</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">container_name:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker_mysql</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">ports:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3306:3306</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">command</span><span style="color:#FFCB6B;">:</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">--default-authentication-plugin=mysql_native_password</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">--character-</span><span style="color:#82AAFF;">set</span><span style="color:#FFCB6B;">-server=utf8mb4</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">--collation-server=utf8mb4_general_ci</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">--explicit_defaults_for_timestamp=</span><span style="color:#82AAFF;">true</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">--lower_case_table_names=1</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">environment:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">LANG:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">en_US.UTF-</span><span style="color:#F78C6C;">8</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">TZ:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Asia/Shanghai</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">MYSQL_ROOT_PASSWORD:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123456</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">volumes:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">D:/docker/mysql/data:/var/lib/mysql</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">D:/docker/mysql/conf:/etc/mysql/conf.d</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">networks:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">app_net:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">ipv4_address:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">172.19.0.3</span></span>
<span class="line"><span style="color:#FFCB6B;">networks:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">app_net:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">ipam:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">config:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">subnet:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">172.19.0.0/</span><span style="color:#F78C6C;">16</span></span>
<span class="line"></span></code></pre></div><h2 id="jenkins-compose文件实例" tabindex="-1">jenkins compose文件实例 <a class="header-anchor" href="#jenkins-compose文件实例" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">version:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">services:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">docker_jenkins:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">user:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">restart:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">always</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">image:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">jenkins/jenkins:latest</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">container_name:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker_jenkins</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">ports:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8080:8080</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">50000:50000</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">volumes:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">D:/docker/jenkins/jenkins_home:/var/jenkins_home</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 把jenkins_home映射到本地</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">docer_nginx:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">user:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">restart:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">always</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">image:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">container_name:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docer_nginx</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">ports:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">80:80</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">443:443</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">volumes:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">D:/docker/nginx/www:/usr/share/nginx/html</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">D:/docker/nginx/conf.d:/etc/nginx/conf.d</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">docker_mysql:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">user:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">restart:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">always</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">image:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql:8.0.28</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">container_name:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker_mysql</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">ports:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3306:3306</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">command</span><span style="color:#FFCB6B;">:</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">--default-authentication-plugin=mysql_native_password</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">--character-</span><span style="color:#82AAFF;">set</span><span style="color:#FFCB6B;">-server=utf8mb4</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">--collation-server=utf8mb4_general_ci</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">--explicit_defaults_for_timestamp=</span><span style="color:#82AAFF;">true</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">--lower_case_table_names=1</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">environment:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">LANG:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">en_US.UTF-</span><span style="color:#F78C6C;">8</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">TZ:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Asia/Shanghai</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">MYSQL_ROOT_PASSWORD:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123456</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">volumes:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">D:/docker/mysql/data:/var/lib/mysql</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">D:/docker/mysql/conf:/etc/mysql/conf.d</span></span>
<span class="line"></span></code></pre></div>`,62),e=[o];function c(t,r,C,y,i,A){return a(),n("div",null,e)}const d=s(p,[["render",c]]);export{F as __pageData,d as default};
